<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <title>Patient View</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style type="text/css">
html { font-family: "San Francisco", sans-serif; font-size: 14px; }
.careplan .body {
    background-color: #FDDDD6;
    padding: 8px;
    border-radius: 8px;
}
.careplan .body h2 {
    margin: 0;
    padding: 0;
    font-size: 16px;
    font-weight: bold;
}
.careplan .body p {
    margin: 0 0 14px 0;
    padding: 0;
}
.boxes {
    display: flex;
    flex-wrap: wrap;
    margin: 0;
    padding: 0;
}
.box {
    /* Positioned relative to that later parts can be made relative */
    position: relative;
    width: calc(50vw - 24px);
    height: calc(50vw - 24px);
    margin: 8px;
    padding: 10px 12px;
    border-radius: 8px;
    background-color: #CCC;
    box-sizing: border-box;
}
.box h2 {
    font-size: 16px;
    margin: 0;
    padding: 0 0 14px 0;
}
.box .measurement {
    font-size: 10vw;
    font-weight: bold;
}
.box .measurement .units {
    font-size: 14px;
    font-weight: normal;
}
.box .source {
    position: absolute;
    bottom: 10px;
    padding: 14px 0 0 0;
    font-size: 12px;
}
.box.disease {
    background-color: #CAF6E7;
}
.box.vital {
    background-color: #C5E0F4;
}
.box.vital-sleep {
    background-color: #C1BBF9;
}
.box.mood {
    background-color: #C2DDF2;
}
        </style>
<script type="application/javascript">
class Box {
    constructor(json) {
        this.title = json['title'];
        this.measurement = json['measurement'];
        this.units = json['units'];
        this.delta = json['delta'];
        this.source = json['source'];
        this.style = json['style'];
    }
    buildBox(container) {
        container.append(this.box = document.createElement('div'));
        this.box.className = 'box ' + (this.style ? this.style : '');
        if (this.title) {
            this.titleDiv = this._appendField(this.title, null, 'h2');
        }
        if (this.measurement) {
            this.measurementDiv = this._appendField(this.measurement, 'measurement');
            if (this.units) {
                this.unitsSpan = document.createElement('units');
                this.unitsSpan.className = "units";
                this.unitsSpan.append(this.units);
                this.measurementDiv.append(this.unitsSpan);
            }
        }
        if (this.delta) {
            this.deltaDiv = this._appendField(this.delta, 'delta');
        }
        if (this.source) {
            this.sourceDiv = this._appendField(this.source, 'source');
        }
    }
    _appendField(contents, type, element) {
        let n = document.createElement(element ? element : "div");
        if (type)
            n.className = type;
        n.append(contents);
        this.box.append(n);
        return n;
    }
}

function receiveBoxes(json) {
    let boxContainer = document.getElementById('health-boxes');
    for (let boxDefinition of json) {
        let box = new Box(boxDefinition);
        box.buildBox(boxContainer);
    }
}
</script>
    </head>
    <body>
        <section class="careplan">
            <h1>Care Plan</h1>
            <div class="body">
                <h2>Go for a 15 minutes jog or bike ride</h2>
                <p>Regular exercise decreases your risk of developing certain diseases, including type 2 diabetes or high blood pressure.</p>
            </div>
        </section>
        <section>
            <h1>Health</h1>
            <div id="health-boxes" class="boxes"></div>
        </section>
    </body>
</html>
